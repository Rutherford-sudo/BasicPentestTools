import subprocess
import sys
import re

interface = sys.argv[1]
mac = sys.argv[2]

ifconfig_prev = subprocess.check_output(["ifconfig", interface]).decode('utf-8')


subprocess.call(f"sudo ifconfig {interface} down",shell=True)
subprocess.call(f"sudo ifconfig {interface} hw ether {mac}",shell=True)
subprocess.call(f"sudo ifconfig {interface} up",shell=True)

ifconfig_result = subprocess.check_output(["ifconfig", interface]).decode('utf-8')
#print(ifconfig_result)

mac_result = re.search(r"\w\w:\w\w:\w\w:\w\w:\w\w:\w\w", ifconfig_result)
mac_old = re.search(r"\w\w:\w\w:\w\w:\w\w:\w\w:\w\w", ifconfig_prev)

if mac_result.group(0) == mac:
    print("[+] Mac Address Changed successfully!")
    print(f"{mac_old.group(0)} ====> {mac_result.group(0)}")
else:
    print("[!] Error, please try again")